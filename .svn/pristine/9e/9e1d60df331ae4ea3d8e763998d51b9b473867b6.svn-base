webpackJsonp([0],{"6CKE":function(e,t){},dAjm:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"index",data:function(){return{fullScreen:"100vh",adlist:[],slidingBlocked:!1,numOfSlides:0,autoPlayTime:800}},beforeCreate:function(){},created:function(){this.fullScreen=window.innerHeight+"px",this.getAdlist()},beforeMount:function(){},mounted:function(){this.silder(),document.getElementsByClassName("slider")[0].style.height=this.fullScreen,window.onresize=function(){this.fullScreen=window.innerHeight+"px",document.getElementsByClassName("slider")[0].style.height=this.fullScreen}},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{getAdlist:function(){var e=this;e.$axios.get(e.$api.adList,{params:{device:"广告屏",pageSize:50}}).then(function(t){if(200==t.status){var i=t.data;e.$axios.get(e.$api.imageShowTime).then(function(t){if(200==t.status){for(var s=0,n=i.length;s<n;s++)i[s].autoPlayTime=1e3*Number(t.data.time),e.$set(e.adlist,s,i[s]);e.silder()}})}})},silder:function(){var e=this;e.$nextTick(function(){var t=document.getElementsByClassName("slide");document.getElementsByClassName("slider__control"),document.getElementsByClassName("slide__inner");e.numOfSlides=t.length;for(var i=0,s=t.length;i<s;i++){var n=i+1;t[i].classList.add("slide-"+n)}e.autoPlaySilder()})},autoPlaySilder:function(){var e=this;if(!(e.slidingBlocked||e.adlist.length<=0)){e.slidingBlocked=!0;var t=document.querySelector(".slide.s--active"),i=t.dataset.slide,s=e.adlist[i-1];if("image"===s.linkType){e.autoPlayTime=s.autoPlayTime;var n=setTimeout(function(){++i>e.numOfSlides&&(i=1);var s=document.querySelector(".slide-"+i);t.classList.remove("s--active"),s.classList.add("s--active"),e.slidingBlocked=!1,clearTimeout(n),e.autoPlaySilder()},e.autoPlayTime)}else if("video"===s.linkType){var l=function(){a.play(),a.addEventListener("ended",function(){++i>e.numOfSlides&&(i=1);var s=document.querySelector(".slide-"+i);t.classList.remove("s--active"),s.classList.add("s--active"),e.slidingBlocked=!1,e.autoPlaySilder()},!1)},a=t.children[0].children[0].children[0];a.play().then(function(){l()}).catch(function(e){console.log("不允许自动播放:",e),a.muted=!0,l()})}}}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"index"},[i("div",{staticClass:"slider"},[i("div",{staticClass:"slider__slides"},e._l(e.adlist,function(t,s){return i("div",{key:s,staticClass:"slide",class:{"s--active":0==s},attrs:{"data-slide":s+1,"data-type":t.linkType}},["image"===t.linkType?i("div",{staticClass:"slide__inner",style:{backgroundImage:"url("+t.imgUrl+")"}},[i("div",{staticClass:"slide__content__box"})]):"video"===t.linkType?i("div",{staticClass:"slide__inner"},[i("div",{staticClass:"slide__content__box"},[i("video",{staticClass:"slide__inner--video",attrs:{controls:"",src:t.url}},[e._v("\n              您的浏览器不支持播放此视频。\n            ")])])]):e._e()])}),0)])])},staticRenderFns:[]};var l=i("C7Lr")(s,n,!1,function(e){i("6CKE")},"data-v-76cb62d8",null);t.default=l.exports}});